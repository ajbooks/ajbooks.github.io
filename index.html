<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <title>Visualización de imagen</title>
    <script>
      // Función para obtener el parámetro pzid de la URL
      function getParameterByName(name, url = window.location.href) {
        name = name.replace(/[\[\]]/g, '\\$&');
        var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
          results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, ' '));
      }

      // Función para llamar al servicio web de Apps Script y mostrar la imagen
      function cargarImagen() {
        var pzid = getParameterByName('pzid');
        
        // Reemplaza 'URL_SERVICIO_WEB' con la URL de tu servicio web
        fetch('https://script.google.com/macros/s/AKfycbxJ_LZhYX2X7AaTJWyGFncDiyZyFmU8OX0ORyLHHIy9rkjM7iOtw6HJ0nFQ4LAvMvLskA/exec?pzid=' + pzid)
          .then(response => response.text())
          .then(base64 => {
            if (base64) {
              var img = document.createElement('img');
              img.src = 'data:image/png;base64,' + base64;
              document.body.appendChild(img);
            } else {
              document.body.innerHTML = '<h1>Imagen no encontrada</h1>';
            }
          });
      }

      // Llamar a la función al cargar la página
      window.onload = cargarImagen;
    </script>
  </head>
  <body>
    <!-- La imagen se mostrará aquí -->
  </body>
</html>
