<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <title>Visualización de imagen</title>
    <script>
      // Función para obtener el parámetro pzid de la URL
      function getParameterByName(name, url = window.location.href) {
        name = name.replace(/[\[\]]/g, '\\$&');
        var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
          results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, ' '));
      }

      // Función para llamar al servicio web de Apps Script y mostrar la imagen
      function cargarImagen() {
        var pzid = getParameterByName('pzid');
        
        // Reemplaza 'URL_SERVICIO_WEB' con la URL de tu servicio web
        fetch('https://script.google.com/macros/s/AKfycbxu1iUOu3AljaHyR67M8mtZygYVLBvpfIEcGVQdy_reC0dPIB8Iqm5xxnO-IX37qWLuWw/exec?pzid=' + pzid)
  .then(response => response.text())
  .then(base64 => {
             var img = document.createElement('img');
              img.src = 'data:image/png;base64,' + base64;
              document.body.appendChild(img);
  })
  .catch(error => {
    console.error(error);
    document.body.innerHTML = '<h1>Error al cargar la imagen</h1>';
  });
      }

      // Llamar a la función al cargar la página
      window.onload = cargarImagen;
    </script>
  </head>
  <body>
    <!-- La imagen se mostrará aquí -->
  </body>
</html>
